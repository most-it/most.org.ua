/*!
 * The Perfect Parallax Scroller
 * ========================================================================
 * 
 * @author:			Tom Dyer
 * @website:		http://www.bespokepixels.co.uk/
 * @version:		1.1
 * @modified:		17-06-2014
 * @requires:		jQuery, some HTML knowledge, coffee and biscuits.
 *
 * @description:	Parallax Scroller class. Adds parallax functionality to 
 * 					any div containers that contain the attribute(s):
 *						data-type          : 'background'      (Required)
 *						data-scroll-height : int               (optional)
 *						data-bg-height     : int(px)/percent   (optional)
 *						data-invert        : boolean           (optional)
 * 
 * This code doesn't come with any license - copy it, use it, edit it, 
 * whatever - but please leave the original author information intact.
 * Credit where credit is due and all that jazz.
 *
 * Visit my website for more useful snippets of code: 
 *  - http://www.bespokepixels.co.uk/
 */
$(document).ready(function(){new ParallaxScrollers();
});document.createElement("article");document.createElement("section");function ParallaxScrollers(){var b=$(window);var d=b.height();var e=$(document);
var j=e.height()-d;var f=[];var i=g();function g(){h();b.scroll(c);b.resize(h);}function h(){d=b.height();j=e.height()-d;f=[];$('[data-type="parallax"]').each(function(r){var l=$(this);
var s=l.data("invert")==true?true:false;var m=l.height();var u=l.offset().top;var o=u+m;var p=l.data("bg-height")?l.data("bg-height"):false;var t=l.data("scroll-height")?l.data("scroll-height"):m;
if(u<d){u=0;}else{u-=d;}if(o>=j){o-=d;}var n={target:l,invert:s,scrollHeight:t,height:m,start:u,end:o,sPercent:u/j,ePercent:o/j,diff:t-m};f[r]=n;if(!l.data("scroll-height")){if(p){if(p.toString().indexOf("%")>=0){var q=(parseInt(p)/100)*m;
}else{var q=p>f[r].scrollHeight?p:f[r].scrollHeight;}f[r].scrollHeight=q;f[r].diff=q-l.height();l.css({"background-size":"auto "+q+"px"});}else{var k=l.css("background-image").replace("url(","").replace(")","").replace("'","").replace('"',"");
a(k,function(v){if(!s){f[r].scrollHeight=v;f[r].diff=v-l.height();}else{f[r].scrollHeight=-v;f[r].diff=v-l.height();}});}}});}function c(){var k=b.scrollTop();
var q=k/j;for(var p=0,m=f.length;p<m;p++){var r=f[p];if(k+d<r.start||k>r.end){continue;}var n=(q-r.sPercent)/(r.ePercent-r.sPercent);if(r.invert){n=1-n;
}r.target.css({backgroundPosition:"50% "+-Math.ceil(r.diff*n)+"px"});}}function a(l,m){if(!m||typeof m!="function"){m=function(){return false;};}var k=$("<img />");
k.hide();k.bind("load",function(){m($(this).height());$(this).remove();c();});$("body").append(k);k.attr("src",l);}}